(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["products"],{"0c09":function(t,e,r){"use strict";r("648d")},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"159b":function(t,e,r){var a=r("da84"),n=r("fdbc"),i=r("17c2"),c=r("9112");for(var u in n){var s=a[u],o=s&&s.prototype;if(o&&o.forEach!==i)try{c(o,"forEach",i)}catch(l){o.forEach=i}}},"17c2":function(t,e,r){"use strict";var a=r("b727").forEach,n=r("a640"),i=r("ae40"),c=n("forEach"),u=i("forEach");t.exports=c&&u?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"305b":function(t,e,r){},4160:function(t,e,r){"use strict";var a=r("23e7"),n=r("17c2");a({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"45fc":function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").some,i=r("a640"),c=r("ae40"),u=i("some"),s=c("some");a({target:"Array",proto:!0,forced:!u||!s},{some:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"648d":function(t,e,r){},"841c":function(t,e,r){"use strict";var a=r("d784"),n=r("825a"),i=r("1d80"),c=r("129f"),u=r("14c3");a("search",1,(function(t,e,r){return[function(e){var r=i(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,r):new RegExp(e)[t](String(r))},function(t){var a=r(e,t,this);if(a.done)return a.value;var i=n(t),s=String(this),o=i.lastIndex;c(o,0)||(i.lastIndex=0);var l=u(i,s);return c(i.lastIndex,o)||(i.lastIndex=o),null===l?-1:l.index}]}))},"9a94":function(t,e,r){},"9c06":function(t,e,r){"use strict";r("9a94")},b64b:function(t,e,r){var a=r("23e7"),n=r("7b0b"),i=r("df75"),c=r("d039"),u=c((function(){i(1)}));a({target:"Object",stat:!0,forced:u},{keys:function(t){return i(n(t))}})},cdea:function(t,e,r){},dbb4:function(t,e,r){var a=r("23e7"),n=r("83ab"),i=r("56ef"),c=r("fc6a"),u=r("06cf"),s=r("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,r,a=c(t),n=u.f,o=i(a),l={},f=0;while(o.length>f)r=n(a,e=o[f++]),void 0!==r&&s(l,e,r);return l}})},e439:function(t,e,r){var a=r("23e7"),n=r("d039"),i=r("fc6a"),c=r("06cf").f,u=r("83ab"),s=n((function(){c(1)})),o=!u||s;a({target:"Object",stat:!0,forced:o,sham:!u},{getOwnPropertyDescriptor:function(t,e){return c(i(t),e)}})},e4fb:function(t,e,r){"use strict";r("ff45")},e6dc:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"products"}},[r("h1",[t._v(t._s(t._f("capitalize")(t.category)))]),r("keep-alive",[t.loadStatus[t.category]?r("ProductsList",{attrs:{category:t.category}}):t._e()],1)],1)},n=[],i=(r("96cf"),r("1da1"));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"products-list"}},[r("ProductsPagination",{attrs:{category:t.category,pageProxy:t.currentPage,maxPages:t.maxPages},on:{updatePage:t.updatePage}}),r("button",{on:{click:t.clearSearch}},[t._v("Clear Search")]),r("table",[t._m(0),r("ProductsSearch",{ref:"search",attrs:{category:t.category,manufacturerLoadStatuses:t.manufacturerLoadStatuses},on:{updateSearch:t.updateSearch}}),t._l(t.productsSubArray,(function(e,a){return r("tr",{key:a},[r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.id))]),r("td",[t._v(t._s(e.manufacturer))]),r("td",[t._v(t._s(e.price))]),r("td",[t._v(t._s(e.color.join(", ")))]),r("Availability",{attrs:{manufacturer:e.manufacturer,productID:e.id,isLoaded:t.manufacturerLoadStatuses[e.manufacturer]}})],1)}))],2),r("ProductsPagination",{attrs:{category:t.category,pageProxy:t.currentPage,maxPages:t.maxPages},on:{updatePage:t.updatePage}})],1)},l=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("th",[t._v("Name")]),r("th",[t._v("ID")]),r("th",[t._v("Manufacturer")]),r("th",[t._v("Price")]),r("th",[t._v("Color")]),r("th",[t._v("Availability")])])}],f=(r("fb6a"),r("4fad"),r("ac1f"),r("841c"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("td",{class:t.availability.toLowerCase()},[t._v(t._s(t.availability))])}),d=[],h=r("2f62"),p={props:{manufacturer:{type:String,required:!0},productID:{type:String,required:!0},isLoaded:{type:Boolean,required:!0}},computed:s(s(s({},Object(h["e"])({availabilityState:"availability"})),Object(h["c"])("availability",["getAvailability"])),{},{availability:function(){var t=!!this.availabilityState[this.manufacturer].items;return this.isLoaded||t?this.getAvailability(this.manufacturer,this.productID):"loading..."}})},m=p,g=(r("9c06"),r("2877")),b=Object(g["a"])(m,f,d,!1,null,"60206cf0",null),v=b.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",{attrs:{id:"products-search"}},t._l(t.inputsArray,(function(e){return r("ProductsSearchInput",{key:e.column,attrs:{category:t.category,column:e.column,maxOptions:e.maxOptions,availabilityLoadStatus:e.availabilityLoadStatus},on:{searchInput:t.collateInputs}})})),1)},P=[],S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("td",{staticClass:"products-search-input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{list:t.column,type:"text"},domProps:{value:t.search},on:{focus:t.select,blur:t.deselect,input:function(e){e.target.composing||(t.search=e.target.value)}}}),t.isSelected?r("datalist",{attrs:{id:t.column}},t._l(t.optionSet,(function(t){return r("option",{key:t,domProps:{value:t}})})),0):t._e()])},O=[],x=(r("45fc"),r("a9e3"),{data:function(){return{searchProxy:"",isSelected:!1}},props:{category:{type:String,required:!0},column:{type:String,required:!0},maxOptions:{type:Number},availabilityLoadStatus:{type:Object}},computed:s(s(s({},Object(h["c"])("products",["getFilteredUniqueSet"])),Object(h["c"])("availability",["getAvailabilitySet"])),{},{search:{get:function(){return this.searchProxy},set:function(t){this.searchProxy="name"===this.column||"availability"===this.column?t.toUpperCase():t}},optionSet:function(){return this.availabilityLoadStatus?this.availabilityOptions:this.getFilteredUniqueSet(this.category,this.column,this.search,this.maxOptions)},availabilityOptions:function(){return Object.entries(this.availabilityLoadStatus).some((function(t){return t[1]}))?this.getAvailabilitySet(this.category):""}}),watch:{search:function(){this.$emit("searchInput",this.column,this.search)}},methods:{select:function(){this.isSelected=!0},deselect:function(){this.isSelected=!1}}}),_=x,j=(r("fc19"),Object(g["a"])(_,S,O,!1,null,"7f67042c",null)),w=j.exports,L={data:function(){return{inputsArray:[{column:"name",maxOptions:50},{column:"id",maxOptions:50},{column:"manufacturer"},{column:"price"},{column:"color"},{column:"availability",availabilityLoadStatus:this.manufacturerLoadStatuses}]}},props:{category:{type:String,required:!0},manufacturerLoadStatuses:{type:Object,required:!0}},components:{ProductsSearchInput:w},methods:{collateInputs:function(t,e){this.$emit("updateSearch",t,e)}}},E=L,k=Object(g["a"])(E,y,P,!1,null,null,null),A=k.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"products-pagination"},[r("button",{attrs:{type:"button"},on:{click:t.decrementPage}},[t._v("Prev")]),r("label",{attrs:{for:"page"}},[t._v("Page")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPage,expression:"currentPage",modifiers:{number:!0}}],attrs:{id:"page",name:"page",type:"number",step:"1",min:"1",max:t.maxPages},domProps:{value:t.currentPage},on:{input:function(e){e.target.composing||(t.currentPage=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("label",{attrs:{for:"page"}},[t._v("of "+t._s(t.maxPages))]),r("button",{attrs:{type:"button"},on:{click:t.incrementPage}},[t._v("Next")])])},I=[],q={props:{pageProxy:{type:Number,required:!0},maxPages:{type:Number,required:!0}},computed:{currentPage:{get:function(){return this.pageProxy},set:function(t){t&&this.$emit("updatePage",t)}}},methods:{incrementPage:function(){this.currentPage++},decrementPage:function(){this.currentPage--}}},$=q,F=(r("0c09"),Object(g["a"])($,D,I,!1,null,"4c66f100",null)),N=F.exports,R={data:function(){return{manufacturerLoadStatuses:{},timer:{},pageProxy:1,search:{}}},props:{category:{type:String,required:!0}},components:{Availability:v,ProductsSearch:A,ProductsPagination:N},computed:s(s(s({},Object(h["c"])("products",["getUniqueSet","getFilteredProducts"])),Object(h["e"])(["availability"])),{},{jackets:function(){return this.getFilteredProducts("jackets",this.search)},shirts:function(){return this.getFilteredProducts("shirts",this.search)},accessories:function(){return this.getFilteredProducts("accessories",this.search)},maxPages:function(){return Math.ceil(this[this.category].length/100)},productsSubArray:function(){this.updatePage(this.currentPage);var t=100*(this.currentPage-1),e=100*this.currentPage;return this[this.category].slice(t,e)},currentPage:{get:function(){return this.pageProxy},set:function(t){this.pageProxy=Math.min(Math.max(t,1),this.maxPages)}}}),methods:s(s(s({},Object(h["b"])(["fetchData"])),Object(h["d"])(["initAvailabilityManufacturer"])),{},{loadFetchSequence:function(){var t=this,e=this.getUniqueSet(this.category,"manufacturer");e.forEach(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r in t.availability||t.initAvailabilityManufacturer(r),t.$set(t.manufacturerLoadStatuses,r,!1),t.availability[r].items){e.next=5;break}return e.next=5,t.fetchAvailability(r);case 5:t.manufacturerLoadStatuses[r]=!0,t.timer[r]=t.setFetchInterval(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},setFetchInterval:function(t){var e=this;return setInterval(Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.manufacturerLoadStatuses[t]=!1,r.next=3,e.fetchAvailability(t);case 3:e.manufacturerLoadStatuses[t]=!0;case 4:case"end":return r.stop()}}),r)}))),3e5)},fetchAvailability:function(t){return this.fetchData({module:"availability",type:t})},updateSearch:function(t,e){t in this.search?this.search[t]=e:this.$set(this.search,t,e)},updatePage:function(t){this.currentPage=t},clearSearch:function(){this.$refs.search.$children.forEach((function(t){return t.search=""}))}}),created:function(){this.loadFetchSequence()},beforeDestroy:function(){for(var t=0,e=Object.entries(this.timer);t<e.length;t++){var r=e[t];clearInterval(this.timer[r[0]])}}},C=R,M=(r("e4fb"),Object(g["a"])(C,o,l,!1,null,"4e1702d0",null)),U=M.exports,J={data:function(){return{loadStatus:{jackets:!1,shirts:!1,accessories:!1}}},props:{category:{type:String,required:!0}},components:{ProductsList:U},computed:s({},Object(h["e"])(["products"])),watch:{category:function(){this.loadProductData()}},methods:s(s({},Object(h["b"])(["fetchData"])),{},{loadProductData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=!!this.products[this.category].items,t.t0){t.next=5;break}return t.next=4,this.fetchData({module:"products",type:this.category});case 4:t.t0=!!t.sent;case 5:this.loadStatus[this.category]=t.t0;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}),created:function(){this.loadProductData()}},z=J,B=(r("f67c"),Object(g["a"])(z,a,n,!1,null,"b2d5bbe8",null));e["default"]=B.exports},f67c:function(t,e,r){"use strict";r("305b")},fc19:function(t,e,r){"use strict";r("cdea")},ff45:function(t,e,r){}}]);
//# sourceMappingURL=products.8af7ab35.js.map